<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" 
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="../templates/templateWorkspace.xhtml" >

    <ui:define name="head"> 
    </ui:define>

    <ui:define name="cabecera">
        <ui:include src="cabecera.xhtml" />
    </ui:define>

    <ui:define name="content">      

        <p:panel>
            <!--<p:separator/>-->



            <!--
            <p:row/>
            <p:outputLabel value="Personaliza los comunicados que apareceran durante el proyecto. Recuerda que debes redactar la convocatoria, las instrucciones y el agradecimiento." />
            <p:row/>
            -->
            <p:growl id="growl" life="4000" sticky="false" />

            <h:form id="frmPersonal">

                <p:card id="panel">

                    <h3>Mis datos personales</h3>

                    <div class="ui-fluid p-formgrid p-grid">

                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Correo electronico"/>
                            <p:inputText id="idCorreo" value="#{actualizaDatosView.strCorreo}" label="Correo" required="true" disabled="true" />
                            <p:message for="idCorreo" />
                        </div>

                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Nombre para mostrar"/>
                            <p:inputText id="idNombre" value="#{actualizaDatosView.strNombre}" label="Nombre"  required="true" requiredMessage="Debe ser un nombre válido"  />
                            <p:message for="idNombre" />
                        </div>

                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Pais"/>
                            <p:selectOneMenu id="idPais" value="#{actualizaDatosView.pais}" label="Pais" required="true" requiredMessage="Debe seleccionar un país" >
                                <f:selectItem itemLabel="Selecciona un pais" itemValue="" />
                                <f:selectItems value="#{actualizaDatosView.lstPaises}"  var="pais" itemLabel="#{pais.ubTxDescripcion}" itemValue="#{pais.ubIdUbigeoPk}" />
                                <p:ajax update="panel" listener="#{actualizaDatosView.cargaCiudades}"/>
                            </p:selectOneMenu>
                            <p:message for="idPais" />                
                        </div>

                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="idCiudad" value="Ciudad"/>
                            <p:selectOneMenu id="idCiudad" value="#{actualizaDatosView.ciudad}" label="Ciudad" required="true" disabled="#{actualizaDatosView.pais==null?true:false}" requiredMessage="Debes seleccionar una ciudad" >
                                <f:selectItem itemLabel="Selecciona una ciudad" itemValue="" />
                                <f:selectItems value="#{actualizaDatosView.lstCiudades}"  var="ciudad" itemLabel="#{ciudad.ubTxDescripcion}" itemValue="#{ciudad.ubIdUbigeoPk}" />
                            </p:selectOneMenu>
                            <p:message for="idCiudad" /> 
                        </div>

                    </div>                    

                    <p:commandButton type="submit" update="frmPersonal,growl" actionListener="#{actualizaDatosView.actualizaPersonales}"  value="Actualizar datos" />

                </p:card>
            </h:form>

            <p:spacer/>

            <h:form id="frmContrasenia">

                <p:card id="panel">

                    <h3>Cambiar contraseña</h3>

                    <div class="ui-fluid p-formgrid p-grid">

                        <div class="p-field p-col-12 p-md-12">
                            <p:outputLabel value="La contraseña ingresada no debe ser mayor a 20 dígitos." />        
                        </div>
                        <!--
                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Contraseña actual"/>
                            <p:password id="strPassActual" value="#{actualizaDatosView.strContrasenia}" label="Contraseña actual" maxlength="20" required="true" requiredMessage="Debe ingresar su contraseña actual" />
                            <p:message for="strPassActual" />
                        </div>
                        -->
                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Nueva contraseña"/> 
                            <p:password id="strPassNuevo" value="#{actualizaDatosView.strContraseniaNueva}" match="strPassReNuevo"  label="Contraseña nueva" feedback="true" maxlength="20" required="true" requiredMessage="Debe ingresar una contraseña" validatorMessage="Debe repetir la misma contraseña" />
                            <p:message for="strPassNuevo" />
                        </div>
                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Repetir nueva contraseña"/>
                            <p:password id="strPassReNuevo" value="#{actualizaDatosView.strContraseniaReNueva}"  label="Repetir contraseña" feedback="true" maxlength="20" required="true" requiredMessage="Debe ingresar una contraseña" />
                            <p:message for="strPassReNuevo" />
                        </div>              
                    </div>
                    <p:commandButton type="submit" update="frmContrasenia,growl" actionListener="#{actualizaDatosView.actualizaContraseña}" value="Cambiar contraseña" />

                </p:card>
            </h:form>     

            <p:spacer/>

            <h:form id="frmEmpresa" >  
                <p:card id="panel">

                    <h3>Datos de la empresa</h3>

                    <div class="ui-fluid p-formgrid p-grid">

                        <div class="p-field p-col-12 p-md-4">

                            <p:outputLabel for="@next" value="Razon social"/>
                            <p:inputText id="idRazon" value="#{actualizaDatosView.strRazonSocial}" label="Razon social" required="true" requiredMessage="Debe ingresar una razon social" >
                            </p:inputText>
                            <p:message for="idRazon" />
                        </div>
                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Tipo documento"/>
                            <p:selectOneMenu id="idTipoDocumento" value="#{actualizaDatosView.intIdTipoDocumento}" label="Tipo documento" required="true" requiredMessage="Debe seleccionar un tipo de documento" >
                                <f:selectItem itemLabel="Selecciona tipo de documento" itemValue="" />
                                <f:selectItems value="#{actualizaDatosView.lstTipoDocumento}"  var="docum" itemLabel="#{docum.strDescDocumento}" itemValue="#{docum.idTipoDocumento}" />
                            </p:selectOneMenu>
                            <p:message for="idTipoDocumento" />
                        </div>
                        <div class="p-field p-col-12 p-md-4">
                            <p:outputLabel for="@next" value="Documento triburario"/>
                            <p:inputText id="idDocumento" value="#{actualizaDatosView.strDocumento}" label="Documento triburario" maxlength="20" required="true" requiredMessage="Debe ingresar un documento" >
                            </p:inputText>
                            <p:message for="idDocumento" />
                        </div>
                    </div>

                    <p:commandButton type="submit" update="frmEmpresa,growl" actionListener="#{actualizaDatosView.actualizaEmpresa}"  value="Actualizar datos" />

                </p:card> 
            </h:form>  

            <!--
            <h3>Logo de la empresa</h3>
            <h:form id="frmLogo" enctype="multipart/form-data" >  
                <p:panel id="panel4">
                    <p:growl showDetail="true" life="4000" sticky="false" />
                    <h:panelGrid columns="1" border="0" cellpadding="5" style="width: 100%" >
                        <p:outputLabel value="Brindanos el logo de la empresa para utilizarlo en los reportes y comunicados. Recuerda que los formatos permitidos son (GIF, JPEG y PNG) y la imagen debe tener un maximo de 3MB" />
    
                        
                        <p:fileUpload fileUploadListener="#{actualizaDatosView.handleFileUpload}" 
                                      mode="advanced" 
                                      dragDropSupport="true"
                                      sizeLimit="3145728"  
                                      previewWidth="80"
                                      fileLimit="1" 
                                      auto="false"
                                      label="Subir"
                                      update="frmLogo"
                                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                       
                        <h:panelGrid columns="3" cellpadding="0" cellspacing="0" >
                            <p:panelGrid columns="1">
                                <f:facet name="header">Logo actual</f:facet>
                                <h:graphicImage alt="Sin imagen" url="/DisplayImage?idUsuario=#{actualizaDatosView.idUsuario}" height="200" width="200" />
                            </p:panelGrid>
    
                        </h:panelGrid>
    
                    </h:panelGrid>
    
                </p:panel>
            </h:form>
            -->
        </p:panel>
    </ui:define>
</ui:composition>