<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="../templates/templateWorkspace.xhtml">    

    <ui:define name="head"> 
    </ui:define>

    <ui:define name="cabecera">
        <ui:include src="cabecera.xhtml" />
        <p:staticMessage severity="info" summary="#{msg['info']}" detail="#{msg['project.info']} #{stepOneView.objProyectoInfo.strDescNombre}" style="width: 100%; margin-top: 5px; margin-left: 2px; margin-right: 2px;"/>
    </ui:define>
    <ui:define name="helpSteps">

        <h:form id="formPrincipalProyecto">

            <div class="p-field">
                <p:steps readonly="false" activeIndex="#{stepFourView.activeIndex}" >
                    <p:menuitem value="#{msg['step.1']}" actionListener="#{stepOneView.goToStep(1)}"/>
                    <p:menuitem value="#{msg['step.2']}" actionListener="#{stepOneView.goToStep(2)}"/>
                    <p:menuitem value="#{msg['step.3']}" actionListener="#{stepOneView.goToStep(3)}"/>
                    <p:menuitem value="#{msg['step.4']}" actionListener="#{stepOneView.goToStep(4)}"/>
                    <p:menuitem value="#{msg['step.5']}" actionListener="#{stepOneView.goToStep(5)}"/>
                    <p:menuitem value="#{msg['step.6']}" actionListener="#{stepOneView.goToStep(6)}"/>
                </p:steps></div>
            <p:spacer/>
            <div class="p-field">
                <center>
                    <p:commandButton value="#{msg['back']}" type="submit" actionListener="#{stepFourView.backStep()}" update="formPrincipalProyecto" styleClass="ui-button-secondary" icon="pi pi-angle-left" />
                    <p:spacer/>
                    <p:commandButton value="#{msg['next']}" type="submit" actionListener="#{stepFourView.nextStep()}" update="formPrincipalProyecto" styleClass="ui-button-secondary" icon="pi pi-angle-right" />                   
                </center>
            </div>


        </h:form>  

    </ui:define>

    <ui:define name="content">

        <p:panel>  
            <p:card>

                <h3>#{msg['step4.title']}</h3>

                <div class="ui-fluid p-formgrid p-grid">

                    <div class="p-field p-col-12 p-md-12">
                        <p:outputLabel value="#{msg['step4.desc1']}" />
                    </div>
                </div>

                <p:tabView cache="true" >

                    <p:tab title="#{msg['announcement']}" >

                        <h:form>

                            <p:growl life="4000" showSummary="true" />

                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-12">
                                    <p:outputLabel value="#{msg['step4.announcement.desc']}" />
                                </div>
                            </div>
                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-6">
                                    <p:card id="cardConvocatoriaDatos">

                                        <h4>#{msg['customization']}</h4>

                                        <div class="p-field">
                                            <p:outputLabel for="strAsuntoConvocatoria" value="#{msg['subject']}" />
                                            <p:inputText id="strAsuntoConvocatoria" value="#{redactarMensajesView.strAsuntoConvocatoria}" 
                                                         required="true" maxlength="200" requiredMessage="#{msg['adm.least.value']}" 
                                                         >
                                            </p:inputText>
                                            <small class="p-d-block">#{msg['step4.announcement.label.1']}</small>
                                        </div>
                                        <div class="p-field">
                                            <p:outputLabel for="strTituloConvocatoria" value="#{msg['title']}" />
                                            <p:inputText id="strTituloConvocatoria" value="#{redactarMensajesView.strTituloConvocatoria}" 
                                                         required="true" maxlength="200" requiredMessage="#{msg['adm.least.value']}" 
                                                         >
                                            </p:inputText>
                                            <small class="p-d-block">#{msg['step4.announcement.label.2']}</small>
                                        </div>
                                        <div class="p-field">
                                            <p:outputLabel for="strParrafoConvocatoria" value="#{msg['step4.announcement.content.paragraph']}" />
                                            <p:textEditor id="strParrafoConvocatoria" value="#{redactarMensajesView.strParrafoConvocatoria}" 
                                                          required="true" requiredMessage="#{msg['adm.least.value']}" 
                                                          >
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-size"></select>
                                                    </span>
                                                </f:facet>
                                            </p:textEditor>
                                            <small class="p-d-block">#{msg['step4.announcement.label.3']}</small>
                                        </div>
                                        <div class="p-field">
                                            <p:commandButton value="#{msg['preview']}" styleClass="ui-button-warning" process="cardConvocatoriaDatos" update="@form"
                                                             icon="pi pi-eye" actionListener="#{redactarMensajesView.previewConvocatoria()}">
                                            </p:commandButton>
                                        </div>   
                                        <!--
                                        <div class="p-field">
                                            <p:commandButton value="#{msg['save']}" process="cardConvocatoriaDatos" update="@form" icon="pi pi-save" actionListener="#{redactarMensajesView.guardarNotificacion(redactarMensajesView.ID_CONVOCATORIA)}">
                                            </p:commandButton>
                                        </div>
                                        -->
                                    </p:card>
                                    <p:divider/>
                                    <p:card id="cardPruebaEnvioCorreo" >
                                        <h4>#{msg['step4.email.test']}</h4>

                                        <div class="p-field">

                                            <p:outputLabel for="correoExtra" value="#{msg['email']}" />
                                            <p:inputText id="correoExtra" widgetVar="correoExtra" 
                                                         required="true" value="#{redactarMensajesView.correoExtra}" 
                                                         maxlength="150" requiredMessage="#{msg['adm.least.value']}" >
                                                <f:validator validatorId="validarCorreo" /> 
                                            </p:inputText>
                                        </div>
                                        <div class="p-field">
                                            <p:commandButton 
                                                actionListener="#{redactarMensajesView.enviarmeMensajeria}" 
                                                icon="pi pi-send"  process="cardPruebaEnvioCorreo"
                                                value="#{msg['send.email']}" update="@form" />
                                        </div>

                                    </p:card>
                                </div>
                                <div class="p-field p-col-12 p-md-6">
                                    <p:card id="cardPreviewConvocatoriaTemplate">
                                        <h4>#{msg['preview']}</h4>

                                        <div>
                                            <p:outputLabel id="outconvoper" value="#{redactarMensajesView.strPreviewConvocatoriaTemplate}" escape="false" />
                                        </div>
                                    </p:card>
                                </div>
                            </div>

                        </h:form>

                    </p:tab>
                    <p:tab title="#{msg['welcome']}">

                        <h:form>

                            <p:growl life="4000" showSummary="true" />

                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-12">
                                    <p:outputLabel value="#{msg['step4.welcome.label.1']}" />
                                </div>
                            </div>
                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-6">
                                    <p:card>
                                        <h4>#{msg['customization']}</h4>

                                        <div class="p-field">
                                            <p:outputLabel for="strBienvenidaRecomendaciones" value="#{msg['step4.welcome.recomendations']}" />
                                            <p:textEditor id="strBienvenidaRecomendaciones" value="#{redactarMensajesView.strBienvenidaRecomendaciones}" 
                                                          required="true" requiredMessage="#{msg['adm.least.value']}" >
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-size"></select>
                                                    </span>
                                                </f:facet>
                                            </p:textEditor>
                                            <small class="p-d-block">#{msg['step4.welcome.label.1']}</small>
                                        </div>

                                        <div class="p-field">
                                            <p:outputLabel for="strBienvenidaConfidencialidad" value="#{msg['step4.welcome.confidentiality']}" />
                                            <p:textEditor id="strBienvenidaConfidencialidad" value="#{redactarMensajesView.strBienvenidaConfidencialidad}" 
                                                          required="true" requiredMessage="#{msg['adm.least.value']}" >
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-size"></select>
                                                    </span>
                                                </f:facet>
                                            </p:textEditor>
                                            <small class="p-d-block">#{msg['step4.welcome.label.2']}</small>
                                        </div>

                                        <div class="p-field">
                                            <p:outputLabel for="strBienvenidaAtentamente" value="#{msg['step4.welcome.end']}" />
                                            <p:textEditor id="strBienvenidaAtentamente" value="#{redactarMensajesView.strBienvenidaAgradecimiento}" 
                                                          required="true" requiredMessage="#{msg['adm.least.value']}" 
                                                          >
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-size"></select>
                                                    </span>
                                                </f:facet>
                                            </p:textEditor>
                                            <small class="p-d-block">#{msg['step4.welcome.label.3']}</small>
                                        </div>

                                        <div class="p-field">
                                            <p:commandButton value="#{msg['preview']}" styleClass="ui-button-warning" update="@form" icon="pi pi-eye" actionListener="#{redactarMensajesView.previewBienvenida()}">
                                            </p:commandButton>
                                        </div>   
                                        <!--
                                        <div class="p-field">
                                            <p:commandButton value="Restaurar" styleClass="ui-button-secondary" update="@form" icon="pi pi-undo" actionListener="#{redactarMensajesView.armarTemplateBienvenida(true)}">
                                            </p:commandButton>
                                        </div>   
                                        -->
                                        <!--
                                        <div class="p-field">
                                            <p:commandButton value="#{msg['save']}" update="@form" icon="pi pi-save" actionListener="#{redactarMensajesView.guardarNotificacion(redactarMensajesView.ID_INSTRUCCIONES)}">
                                            </p:commandButton>
                                        </div>
                                        -->

                                    </p:card>
                                </div>
                                <div class="p-field p-col-12 p-md-6">
                                    <p:card id="cardPreviewBienvenidaTemplate">
                                        <h4>#{msg['preview']}</h4>

                                        <div>
                                            <p:outputLabel id="outconvoper" value="#{redactarMensajesView.strPreviewBienvenidaTemplate}" escape="false" />
                                        </div>
                                    </p:card>
                                </div>
                            </div>

                        </h:form>

                    </p:tab>
                    <p:tab title="#{msg['regards']}">
                        <h:form>

                            <p:growl life="4000" showSummary="true" />

                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-12">
                                    <p:outputLabel value="#{msg['step4.regards.desc']}" />
                                </div>
                            </div>
                            <div class="ui-fluid p-formgrid p-grid">

                                <div class="p-field p-col-12 p-md-6">
                                    <p:card>
                                        <h4>#{msg['customization']}</h4>

                                        <div class="p-field">
                                            <p:outputLabel for="strAgradecimiento" value="#{msg['regard']}" />
                                            <p:textEditor id="strAgradecimiento" value="#{redactarMensajesView.strAgradecimiento}" 
                                                          required="true" requiredMessage="#{msg['adm.least.value']}" 
                                                          >
                                                <f:facet name="toolbar">
                                                    <span class="ql-formats">
                                                        <button class="ql-bold"></button>
                                                        <button class="ql-italic"></button>
                                                        <button class="ql-underline"></button>
                                                        <button class="ql-strike"></button>
                                                    </span>
                                                    <span class="ql-formats">
                                                        <select class="ql-size"></select>
                                                    </span>
                                                </f:facet>
                                            </p:textEditor>
                                            <small class="p-d-block">#{msg['step4.regards.label.1']}</small>
                                        </div>

                                        <div class="p-field">
                                            <p:commandButton value="#{msg['preview']}" styleClass="ui-button-warning" update="@form" icon="pi pi-eye" actionListener="#{redactarMensajesView.previewAgradecimiento()}">
                                            </p:commandButton>
                                        </div>   
                                        <!--
                                        <div class="p-field">
                                            <p:commandButton value="Restaurar" styleClass="ui-button-secondary" update="@form" icon="pi pi-undo" actionListener="#{redactarMensajesView.armarTemplateAgradecimiento(true)}">
                                            </p:commandButton>
                                        </div>   
                                        -->
                                        <!--
                                        <div class="p-field">
                                            <p:commandButton value="#{msg['save']}" update="@form" icon="pi pi-save" actionListener="#{redactarMensajesView.guardarNotificacion(redactarMensajesView.ID_AGRADECIMIENTO)}">
                                            </p:commandButton>
                                        </div>
                                        -->


                                    </p:card>
                                </div>
                                <div class="p-field p-col-12 p-md-6">
                                    <p:card id="cardPreviewAgradecimientoTemplate">
                                        <h4>#{msg['preview']}</h4>

                                        <div>
                                            <p:outputLabel id="outconvoper" value="#{redactarMensajesView.strPreviewAgradecimientoTemplate}" escape="false" />
                                        </div>
                                    </p:card>
                                </div>
                            </div>

                        </h:form>
                    </p:tab>
                </p:tabView>
            </p:card>
        </p:panel>
    </ui:define>
</ui:composition>