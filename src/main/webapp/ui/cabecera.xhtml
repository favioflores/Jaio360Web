<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" >
    <h:head/>
    <body>
        <ui:composition>
            <h:form>

                <p:menubar model="#{menuPrincipal.menuPrincipal}" >
                    <f:facet name="options">

                        <div class="ui-input-icon-left p-mr-2">
                            <p:outputLabel style="margin-right:30px;" value="#{msg['cabecera.bienvenido']} #{menuPrincipal.usuarioInfo.strDescripcion}" />
                        </div>
                        <p:commandButton value="#{msg['cabecera.cerrar.sesion']}" id="btcerrarSesion" widgetVar="btcerrarSesion" styleClass="ui-button-secondary" icon="pi pi-fw pi-sign-out" actionListener="#{usuarioSesion.cerrarSesion}"  >
                            <p:confirm header="#{msg['cabecera.logout.confirmacion.title']}" icon="pi pi-info-circle" message="#{msg['cabecera.logout.confirmacion.mensaje']}" /> 
                        </p:commandButton>
                    </f:facet>
                </p:menubar>

                <p:confirmDialog global="true" showEffect="drop" hideEffect="drop" responsive="true" width="400"  >
                    <p:commandButton type="button" value="#{msg['cabecera.logout.confirmacion.si']}" styleClass="ui-confirmdialog-yes" />
                    <p:commandButton type="button" value="#{msg['cabecera.logout.confirmacion.no']}" styleClass="ui-confirmdialog-no" />
                </p:confirmDialog>

            </h:form>

        </ui:composition>

        <h:form prependId="false">
            <!--p:idleMonitor timeout="3600000" -->
            <p:idleMonitor timeout="3600000" >
                <p:ajax event="idle" listener="#{usuarioSesion.timeout()}" oncomplete="PF('timeoutDlg').show();"/>
            </p:idleMonitor>

            <p:dialog header="#{msg['aviso.cierre']}" widgetVar="timeoutDlg" width="400" closable="false" maximizable="false" resizable="false" draggable="false" closeOnEscape="false" modal="true" >

                <div class="ui-fluid">

                    <div class="p-field">
                        <p:outputLabel value="#{msg['aviso.texto.explicado']}" class="p-m-2" />
                    </div>
                    <div class="p-field">
                        <p:button outcome="iniciar" value="#{msg['aviso.ok']}" class="p-m-2" />         
                    </div>
                </div>

            </p:dialog> 

        </h:form>

        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            <h5>Procesando</h5>
            <p:progressBar id="progressBarIndeterminate" style="height:10px;" mode="indeterminate"/>
        </p:dialog>

    </body>

</html>